<dom-module id="equipments-list">
    <template>
        <template is="dom-repeat" items="{{menu}}">
            <div class="heading list-btn" target="{{item.id}}">
                <iron-icon icon="{{item.icon}}"></iron-icon>
                {{item.name}}
            </div>
            <iron-collapse target="{{item.id}}">
                <template is=" dom-repeat " items="{{item.items}} " as="item ">
                    <div>{{item.name}}</div>
                </template>
            </iron-collapse>
        </template>
        <iron-ajax auto verbose url="http://gdata.youtube.com/feeds/api/videos/ " params='{"alt ":"json ", "q ":"chrome "}' handle-as="json " on-response="handleResponse " debounce-duration="3000 "></iron-ajax>
    </template>
    <script>
        Polymer({
            is: 'equipments-list',
            ready: function () {
                var btns = this.querySelectorAll(".list-btn ");
                for (var i in btns) {
                    btns[i].onclick = function () {
                        var target = btns[i].target;
                        document.querySelector('#collapse1 [target=' + target + ']').toggle()
                    }
                }
            },
            handleResponse: function (e) {
                console.log(e);
                this.menu = [
                    {
                        id: 0,
                        icon: "av:volume-up ",
                        name: "TOYA ",
                        items: [
                            {
                                name: "TOYA ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 1,
                        icon: "communication:message ",
                        name: "海報架 ",
                        items: [
                            {
                                name: "海報架-1 ",
                                has: true
                        },
                            {
                                name: "海報架-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 2,
                        icon: "image:flash-on ",
                        name: "滾筒 ",
                        items: [
                            {
                                name: "滾筒-1 ",
                                has: true
                        },
                            {
                                name: "滾筒-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 3,
                        icon: "image:wb-sunny ",
                        name: "探燈 ",
                        items: [
                            {
                                name: "LED探燈 ",
                                has: true
                        },
                            {
                                name: "鹵素探燈 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 4,
                        icon: "image:wb-sunny ",
                        name: "探燈架 ",
                        items: [
                            {
                                name: "探燈架-1 ",
                                has: true
                        },
                            {
                                name: "探燈架-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 5,
                        icon: "av:mic ",
                        name: "MIC ",
                        items: [
                            {
                                name: "MIC-1 ",
                                has: true
                        },
                            {
                                name: "MIC-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 6,
                        icon: "icons:settings-input-component ",
                        name: "MIC線 ",
                        items: [
                            {
                                name: "MIC線-1 ",
                                has: true
                        },
                            {
                                name: "MIC線-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 7,
                        icon: "icons:settings-input-component ",
                        name: "2.5(公)轉3.5(公) ",
                        items: [
                            {
                                name: "2.5(公)轉3.5(公)-1 ",
                                has: true
                        },
                            {
                                name: "2.5(公)轉3.5(公)-2 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 8,
                        icon: "maps:local-shipping ",
                        name: "推車 ",
                        items: [
                            {
                                name: "推車 ",
                                has: true
                        }
                    ]
                },
                    {
                        id: 9,
                        icon: "device:storage ",
                        name: "梯子 ",
                        items: [
                            {
                                name: "斜靠梯 ",
                                has: true
                        },
                            {
                                name: "梯子 ",
                                has: true
                        }
                    ]
                }
            ];
            }
        });
    </script>
</dom-module>